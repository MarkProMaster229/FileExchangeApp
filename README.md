# Веб-приложение для обмена файлами

Это веб-приложение, разработанное на Python, позволяет пользователям регистрироваться, входить в систему и управлять файлами в приватных и публичных хранилищах. Для управления пользователями используется PostgreSQL, а для хранения файлов — MinIO. 
Лимит на приватные файлы для каждого пользователя составляет 10 ГБ. Публичными файлами можно делиться через уникальные ссылки с токенами - с высоким уровнем энтропии.

## Возможности
- **Аутентификация пользователей**: Регистрация и вход с использованием имени пользователя и пароля.
- **Приватное хранилище файлов**: Загрузка, скачивание и удаление файлов в приватном бакете (`mybucket`).
- **Публичный обмен файлами**: Загрузка файлов в публичный бакет (`publicbaket`) с возможностью обмена через ссылки.
- **Лимит хранения**: Ограничение в 10 ГБ на пользователя для приватных файлов.
- **Автоматическая очистка**: Ежедневное удаление файлов в публичном и приватных бакетах в 19:16.

## Технологии
- **Backend**: Flask (Python)
- **База данных**: PostgreSQL
- **Хранилище файлов**: MinIO
- **Дополнительные библиотеки**: psycopg2-binary, minio, schedule
- **Контейнеризация**: Docker Compose

## Установка и запуск

### Предварительные требования
- Установленный Docker и Docker Compose
- Python 3.11 (если запускаете без Docker)
- Доступ к MinIO и PostgreSQL (локально или через Docker)

### Установка через Docker

1. **Клонируйте репозиторий**:
   ```bash
   git clone <https://github.com/MarkProMaster229/FileExchangeApp.git>
   ```


2. **Запустите Docker Compose**:
   ```bash
   docker-compose up --build
   ```

   Это запустит три сервиса:
   - Flask-приложение на порту `5000`
   - PostgreSQL на порту `5432`
   - MinIO на портах `9000` (API) и `9001` (консоль)

3. **Откройте приложение**:
   Перейдите по адресу `http://localhost:5000` в браузере.

## Использование

1. **Регистрация**:
   - Перейдите на страницу `/registration`.
   - Введите имя пользователя и пароль.
   - После успешной регистрации вы будете перенаправлены на страницу управления файлами.

2. **Вход**:
   - На главной странице (`/`) введите имя пользователя и пароль.
   - Если данные верны, вы попадете на страницу управления файлами.

3. **Управление файлами**:
   - **Приватные файлы**: Загружайте файлы в приватный бакет, скачивайте или удаляйте их. Лимит — 10 ГБ.
   - **Публичные файлы**: Загружайте файлы в публичный бакет и получайте ссылки для пользователя. Ссылки содержат уникальный токен.
   - **Скачивание**: Используйте сгенерированные ссылки для доступа к публичным файлам.

## Структура проекта
- `main.py`: Основной файл приложения Flask.
- `UserRegistration.py`: Класс для управления пользователями (СУБД).
- `connection.py`: Класс `Backet` для работы с MinIO (загрузка, скачивание, удаление файлов).
- `docker-compose.yml`: Конфигурация для запуска сервисов.
- `Dockerfile`: Инструкции для сборки Flask-приложения.
- `templates/`: HTML-шаблоны для интерфейса (`index.html`, `registration.html`, `filerecipient.html`).

